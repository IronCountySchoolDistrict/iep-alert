<!-- This page contains the pop-up content that is seen when a user clicks on the alert icon on PS Teacher and PS Admin -->
<!--
    TODO: Refactor this page so it doesn't directly use custom fields data in headerTemplate logic.
    Use javascript object to store that data instead and pass that into _.headerTemplate function
-->
<script type="text/template" id="alert-content-template">
    <div id="alert-content" style="width: auto;">
        <div class="studentAlert" id="alert-balance~(studentfrn)">
            <img class="alertImage" src="/images/icon-i.png" />
            <div class="alertContent">
                <p class="alertHeader">~(studentname)</p>
                <p>
                <ul>
                    <%
                        if(alert.disability != ' ') {
                    %>
                        <li><span style="font-weight: bold;">Disability: </span>~([Students.U_sped]disability)</li>
                    <%
                        }
                    %>

                    <%
                        if(alert.behavior_plan) {
                    %>
                        <li><span style="font-weight: bold;">Behavioral Plan</span></li>
                    <%
                        }
                    %>

                    <%
                        if(alert.highlight_text) {
                    %>
                        <li><span style="font-weight: bold;">Highlight text</span></li>
                    <%
                        }
                    %>

                    <%
                        if(alert.provide_paper_notes) {
                    %>
                        <li><span style="font-weight: bold;">Provide paper notes for the student</span></li>
                    <%
                        }
                    %>

                    <%
                        if(alert.resource_room) {
                    %>
                        <li><span style="font-weight: bold;">Resource room available for assistance</span></li>
                    <%
                        }
                    %>

                    <%
                        if(alert.extended_time_oral) {
                    %>
                        <li><span style="font-weight: bold;">Give extended time limits for oral responses</span></li>
                    <%
                        }
                    %>

                    <%
                        if(alert.extended_time_limit_testing !== ' ') {
                    %>
                        <li><span style="font-weight: bold;">Extended time limit for testing: </span>~([Students.U_Sped]extended_time_limit_testing) minutes</li>
                    <%
                        }
                    %>

                    <%
                        if(alert.extended_time_limit_asmt !== ' ') {
                    %>
                        <li><span style="font-weight: bold;">Extended time limit for assignments: </span>~([Students.U_Sped]extended_time_limit_asmt) days</li>
                    <%
                        }
                    %>

                    <%
                        if(alert.use_calculator) {
                    %>
                        <li><span style="font-weight: bold;">Use of calculator and/or math fact sheet</span></li>
                    <%
                        }
                    %>

                    <%
                        if(alert.read_orally) {
                    %>
                        <li><span style="font-weight: bold;">Read assignments/tests orally</span></li>
                    <%
                        }
                    %>

                    <%
                        if(alert.reduce_exam_length) {
                    %>
                        <li><span style="font-weight: bold;">Reduce length of exam</span></li>
                    <%
                        }
                    %>

                    <%
                        if(alert.dont_check_spelling) {
                    %>
                        <li><span style="font-weight: bold;">Don't check spelling unless specifically stated</span></li>
                    <%
                        }
                    %>

                    <%
                        if(alert.books_on_tape) {
                    %>
                        <li><span style="font-weight: bold;">Books on tape (if available)</span></li>
                    <%
                        }
                    %>

                    <%
                        if(alert.minimize_work') {
                    %>
                        <li><span style="font-weight: bold;">Minimize written work</span></li>
                    <%
                        }
                    %>

                    <%
                        if(alert.oral_presentation) {
                    %>
                        <li><span style="font-weight: bold;">Oral presentations may be given to teacher or in a small group setting</span></li>
                    <%
                        }
                    %>

                    <%
                        if(alert.additional_adaptions) {
                    %>
                        <li><span style="font-weight: bold;">Additional Classroom Adaptations: </span>~([Students.U_Sped]additional_adaptions)</li>
                    <%
                        }
                    %>
                </ul>
                </p>
                <p>Please contact
                    <%
                        if (alert.caseload !== ' ') {
                    %>
                        ~([Students.U_sped]caseload)
                    <%
                        } else {
                    %>
                        resource teacher
                    <%
                        }
                    %>
                    if you have any questions.
                </p>
            </div>

        </div>
    </div>
</script>
<script>
    if (psData === undefined) {
        var psData = {};
    }
    psData.studentfrn = "~(studentfrn)";

    $j.getJSON('/admin/json/alert.json.html?frn=' + psData.studentfrn, function (alert) {
        var template = $j('#alert-content-template').html();
        var select = $j('#psDialog');
        var renderedTemplate = _.template(template, alert);
        select.html(renderedTemplate);

        // When the dialog is first rendered, there isn't any content in it, so the centering is based on
        // the empty dialog box. When content is put into it, it doesn't automatically recenter itself,
        // so calling this function will recenter the dialog box.
        $j('#psDialog').dialog('option', 'position', 'center');
    });
</script>